(this.webpackJsonpoms=this.webpackJsonpoms||[]).push([[14],{436:function(e,t,n){"use strict";var r=n(154),a=n(82),c=n(437),i=n(0),o=n.n(i),l=n(663);t.a=function(e){var t=e.total,n=e.changePage,u=e.pagination,d=e.keyWord,s=void 0===d?"order":d,f=Object(c.a)(e,["total","changePage","pagination","keyWord"]),m=Object(i.useState)(1),p=Object(a.a)(m,2),h=p[0],g=p[1],y={current:h,total:t,showTotal:function(e){return"\u5171 ".concat(e," \u6761")},showQuickJumper:!0,position:["bottomCenter"],onChange:function(e){g(e),n(e),sessionStorage.setItem(s+"PageNum",e)}};return o.a.createElement(l.a,Object.assign({pagination:u&&Object(r.a)({},y,{},u)},f))}},479:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(57),a=function(e){return r.a.get("/order/find",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},c=function(e){return r.a.post("/order/create",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},i=function(e){return r.a.get("/order/submit",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},o=function(e){return r.a.get("/order/confirm",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},l=function(e){return r.a.get("/order/route",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},u=function(e){return r.a.get("/order/findOne",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))}},630:function(e,t,n){},659:function(e,t,n){"use strict";n.r(t);var r=n(36),a=n.n(r),c=n(63),i=n(82),o=n(0),l=n.n(o),u=n(421),d=n(667),s=n(665),f=n(160),m=n(43),p=n(216),h=n(419),g=n(668),y=n(676),v=n(677),k=n(678),w=n(439),x=n.n(w),b=(n(442),n(436)),O=n(479),j=(n(630),u.a.Search),E=d.a.Step,_=s.a.Text;x.a.locale("zh-cn");function I(e){var t=e.filter((function(e){return"COD"===e.name}));return e.length&&t.length?t.length?"\r\n\u4ee3\u6536\u91d1\u989d\uff1a".concat(t[0].value):void 0:""}t.default=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],u=Object(o.useState)(0),s=Object(i.a)(u,2),w=s[0],C=s[1],S=Object(o.useState)([]),N=Object(i.a)(S,2),P=N[0],A=N[1],D=Object(o.useState)(!1),z=Object(i.a)(D,2),T=z[0],F=z[1],J=[{key:"orderid",dataIndex:"orderid",title:"\u8ba2\u5355\u53f7",align:"center",fixed:"left",width:150,render:function(e,t){return l.a.createElement(_,{copyable:{text:"\u5730\u5740\uff1a".concat(t.d_address," | \n                                    \r\n\u59d3\u540d\uff1a").concat(t.d_contact," | \n                                    \r\n\u7535\u8bdd\uff1a").concat(t.d_tel," | \n                                    \r\n\u4e0b\u5355\uff1a").concat(t.Cargo.map((function(e){return"".concat(e.count,"-").concat(e.name," ")})).join(",")).concat(I(t.AddedService)?" | ":"","\n                                    ").concat(I(t.AddedService))}},l.a.createElement(f.a,{title:"\u590d\u5236\u8ba2\u5355\u4fe1\u606f"},e))}},{key:"mailno",dataIndex:"mailno",title:"\u987a\u4e30\u8fd0\u5355\u53f7",width:150,align:"center",fixed:"left",render:function(e){return e||"\u4e0b\u5355\u540e\u5373\u53ef\u751f\u6210\u8fd0\u5355\u53f7"}},{key:"dealtype",dataIndex:"dealtype",title:"\u8ba2\u5355\u72b6\u6001",width:80,align:"center",fixed:"left",render:function(e){return l.a.createElement("div",{className:"order-status"},l.a.createElement("span",{className:0===e?"info":1===e?"complete":"cancel"},0===e?"\u672a\u4e0b\u5355":1===e?"\u5df2\u4e0b\u5355":"\u5df2\u53d6\u6d88"))}},{title:"\u7269\u54c1\u4fe1\u606f",children:[{key:"name",dataIndex:"Cargo",title:"\u8d27\u54c1\u540d\u79f0",align:"center",width:100,render:function(e){return e&&e.length?l.a.createElement("ul",{className:"cargo-list"},e.map((function(e,t){return l.a.createElement("li",{key:e.name+t},e.name)}))):{children:"\u6682\u65e0\u8d27\u54c1\u4fe1\u606f",props:{colSpan:2}}}},{key:"count",dataIndex:"Cargo",title:"\u8d27\u54c1\u6570\u91cf",align:"center",width:100,render:function(e){return e&&e.length?l.a.createElement("ul",{className:"cargo-list"},e.map((function(e,t){return l.a.createElement("li",{key:e.count+""+t},e.count)}))):{props:{colSpan:0}}}}]},{title:"\u5bc4\u4ef6\u4eba\u4fe1\u606f",children:[{key:"j_company",dataIndex:"j_company",title:"\u5bc4\u4ef6\u4eba\u516c\u53f8\u540d\u79f0",width:100,align:"center"},{key:"j_contact",dataIndex:"j_contact",title:"\u5bc4\u4ef6\u4eba\u59d3\u540d",width:80,align:"center"},{key:"j_tel",dataIndex:"j_tel",title:"\u5bc4\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd",width:110,align:"center"},{key:"j_address",dataIndex:"j_address",title:"\u5bc4\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740",align:"center",width:150}]},{title:"\u6536\u4ef6\u4eba\u4fe1\u606f",children:[{key:"d_company",dataIndex:"d_company",title:"\u6536\u4ef6\u4eba\u516c\u53f8\u540d\u79f0",width:100,align:"center"},{key:"d_contact",dataIndex:"d_contact",title:"\u6536\u4ef6\u4eba\u59d3\u540d",width:80,align:"center"},{key:"d_tel",dataIndex:"d_tel",title:"\u6536\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd",width:110,align:"center"},{key:"d_address",dataIndex:"d_address",title:"\u6536\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740",align:"center",width:150}]},{title:"\u589e\u503c\u670d\u52a1",children:[{key:"AddedService",dataIndex:"AddedService",title:"\u662f\u5426\u4ee3\u6536\u8d27\u6b3e",align:"center",width:80,render:function(e){return e.filter((function(e){return"COD"===e.name})).length?l.a.createElement(y.a,{twoToneColor:"#52c41a"}):l.a.createElement(v.a,null)}},{key:"value",dataIndex:"AddedService",title:"\u4ee3\u6536\u8d27\u6b3e\u91d1\u989d",align:"center",width:80,render:function(e){return e.filter((function(e){return"COD"===e.name})).length?e.filter((function(e){return"COD"===e.name}))[0].value:"\u2014\u2014"}},{key:"value1",dataIndex:"AddedService",title:"\u4ee3\u6536\u8d27\u6b3e\u5361\u53f7",align:"center",width:150,render:function(e){return e.filter((function(e){return"COD"===e.name})).length?e.filter((function(e){return"COD"===e.name}))[0].value1:"\u2014\u2014"}}]},{title:"\u8ba2\u5355\u65f6\u95f4",children:[{key:"createAt",dataIndex:"createAt",title:"\u4e0b\u5355\u65f6\u95f4",align:"center",width:120,render:function(e){return x()(e).format("llll")}},{key:"updateAt",dataIndex:"updateAt",title:"\u6700\u8fd1\u4e00\u6b21\u4fee\u6539",align:"center",width:120,render:function(e){return x()(e).format("llll")}},{key:"sendstarttime",dataIndex:"sendstarttime",title:"\u4e0a\u95e8\u53d6\u4ef6\u65f6\u95f4",align:"center",width:120,render:function(e){return x()(e).format("llll")}}]},{key:"action",dataIndex:"action",title:"\u64cd\u4f5c",width:120,align:"center",fixed:"right",render:function(e,t){return l.a.createElement(l.a.Fragment,null,t.mailno?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{type:"link",onClick:function(){return B(t.orderid)}},"\u67e5\u8be2\u7269\u6d41\u72b6\u6001"),l.a.createElement(m.a,{type:"link",onClick:function(){return q(t)},danger:!0},"\u53d6\u6d88\u8ba2\u5355")):l.a.createElement(m.a,{type:"primary",ghost:!0,shape:"round",size:"small",onClick:function(){return R(t.orderid)}},"\u7acb\u5373\u4e0b\u5355"))}}],W={width:360},B=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)({tracking_number:t,tracking_type:2});case 2:n=e.sent,r=n.code,c=n.msg,i=n.data,1===r?(A(i.reverse()),F(!0)):p.a.error(c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)({orderid:t});case 2:n=e.sent,c=n.code,i=n.msg,o=n.data,1===c?(p.a.success(i),r(o),C(1)):p.a.error(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,c,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("orderPageNum")||1,e.next=3,Object(O.d)({page:t});case 3:n=e.sent,c=n.code,i=n.data,o=n.count,1===c&&(r(i),C(o));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.a.confirm({title:"\u4e0b\u5355\u540e\uff0c\u60a8\u7684\u8ba2\u5355\u5c06\u4f1a\u53d1\u9001\u5230\u987a\u4e30\u540e\u53f0\uff0c\u786e\u5b9a\u7ee7\u7eed\u64cd\u4f5c\u5417\uff1f",style:{top:"30%"},onOk:function(){var e=Object(c.a)(a.a.mark((function e(){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.f)({orderid:t});case 2:n=e.sent,r=n.code,c=n.msg,1===r?(p.a.success("\u4e0b\u5355\u6210\u529f"),Q()):p.a.error(c||"\u90e8\u5206\u5b57\u6bb5\u683c\u5f0f\u4e0e\u987a\u4e30\u540e\u53f0\u5b57\u6bb5\u683c\u5f0f\u4e0d\u5339\u914d\uff0c\u8bf7\u8054\u7cfb\u5f00\u53d1\u4eba\u5458");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){p.a.warning("\u5df2\u53d6\u6d88\u64cd\u4f5c")}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){h.a.confirm({title:l.a.createElement("h3",{className:"order-modal-title"},l.a.createElement(k.a,{className:"mr10"}),"\u63d0\u793a\uff1a"),content:l.a.createElement("p",{className:"order-modal-content"},"\u53d6\u6d88\u8ba2\u5355\u540e\uff0c\u8be5\u8ba2\u5355\u5c06\u4e0d\u518d\u663e\u793a\u5728\u60a8\u7684\u5217\u8868\u4e2d\uff0c\u5e76\u4e14\u987a\u4e30\u4e5f\u4e0d\u518d\u63a5\u5355\uff0c\u786e\u8ba4\u7ee7\u7eed\u64cd\u4f5c\u5417\uff1f"),style:{top:"30%"},onOk:function(){var t=Object(c.a)(a.a.mark((function t(){var n,r,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.orderid,t.next=3,Object(O.a)({orderid:n,dealtype:2});case 3:r=t.sent,c=r.code,i=r.msg,1===c?p.a.success("\u72b6\u6001\u4fee\u6539\u6210\u529f"):p.a.error(i);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onCancel:function(){p.a.warning("\u5df2\u53d6\u6d88\u64cd\u4f5c")}})};return Object(o.useEffect)((function(){Q()}),[]),l.a.createElement("div",{className:"order-list"},l.a.createElement("div",{className:"container"},l.a.createElement(b.a,{rowKey:function(e){return e._id},dataSource:n,columns:J,total:w,size:"small",bordered:!0,scroll:{x:"max-content",y:400,scrollToFirstRowOnChange:!0},changePage:Q,title:function(){return l.a.createElement(j,{style:W,placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7",enterButton:"\u67e5\u8be2",onSearch:K})}})),T&&l.a.createElement(g.a,{placement:"left",closable:!1,onClose:F(!1),visible:T},l.a.createElement(d.a,{progressDot:!0,current:P.length,direction:"vertical",size:"small"},P.map((function(e){return l.a.createElement(E,{key:e.accept_time,title:e.accept_address,description:e.accept_time+e.remark})})))))}}}]);