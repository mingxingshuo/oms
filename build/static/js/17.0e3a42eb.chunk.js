(this.webpackJsonpoms=this.webpackJsonpoms||[]).push([[17],{470:function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return u})),r.d(t,"b",(function(){return s}));var n=r(63),a=function(e){return n.a.get("/department",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},c=function(e){return n.a.post("/department",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},o=function(e){return n.a.put("/department",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},u=function(e){return Promise.resolve(e),n.a.put("/department/setManage",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},s=function(e){return n.a.delete("/department",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))}},703:function(e,t,r){"use strict";r.r(t);var n=r(170),a=r(49),c=r.n(a),o=r(71),u=r(89),s=r(0),i=r.n(s),l=r(47),m=r(547),d=r(436),f=r(69),p=r(437),g=r(438),v=r(37),h=r(171),b=r(470),E=m.a.Option;t.default=Object(l.g)((function(e){var t=e.location,r=e.history,a=Object(s.useState)(""),l=Object(u.a)(a,2),O=(l[0],l[1]),j=Object(s.useState)(""),k=Object(u.a)(j,2),P=k[0],x=k[1],w=Object(s.useState)([]),y=Object(u.a)(w,2),B=y[0],C=y[1],T=i.a.createRef(),I=function(){var e=Object(o.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)();case 2:t=e.sent,r=t.code,n=t.data,C(1===r?n:[]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.departmentName=B.filter((function(e){return e._id===t.departmentId}))[0].name,d.a.confirm({title:P?"\u786e\u5b9a\u4fee\u6539\u8d26\u6237\u4fe1\u606f\u5417\uff1f":"\u786e\u5b9a\u521b\u5efa\u4e00\u4e2a\u65b0\u8d26\u6237\u5417\uff1f",onOk:function(){var e=Object(o.a)(c.a.mark((function e(){var r,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=6;break}return e.next=3,Object(h.f)(Object(n.a)({},t,{id:P}));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Object(h.a)(t);case 8:e.t0=e.sent;case 9:r=e.t0,a=r.code,o=r.msg,1===a?(F(),f.a.success(o)):f.a.error(o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){T.current.resetFields(),x(""),O("")},F=function(){N(),r.goBack()};return Object(s.useEffect)((function(){var e=localStorage.getItem("role");if(O(e),I(),t.query){var a=t.query.info;x(a._id),T.current.setFieldsValue(Object(n.a)({},a))}else t.pathname.indexOf("/edit")>-1&&r.push("./add")}),[]),i.a.createElement("div",null,i.a.createElement("div",{className:"container"},i.a.createElement(p.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:8}}},{ref:T,onFinish:q}),i.a.createElement(p.a.Item,{name:"username",label:"\u7528\u6237\u540d",validateTrigger:["onBlur","onChange"],rules:[{validator:function(e,t){return t?/[\u4E00-\u9FA5]/g.test(t)?Promise.reject("\u4e0d\u80fd\u8f93\u5165\u6c49\u5b57!"):Promise.resolve():Promise.reject("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a")},validateTrigger:"onBlur"}],required:!0},i.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})),i.a.createElement(p.a.Item,{name:"nickName",label:"\u6635\u79f0",validateTrigger:["onBlur","onChange"],rules:[{required:!0,message:"\u4e3a\u4e86\u65b9\u4fbf\u533a\u5206\uff0c\u8bf7\u4e3a\u8d26\u6237\u8bbe\u7f6e\u6635\u79f0(\u53ef\u4ee5\u7528\u4e2d\u6587)",validateTrigger:"onBlur"}]},i.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6635\u79f0"})),i.a.createElement(p.a.Item,{name:"password",label:"\u5bc6\u7801",validateTrigger:["onBlur","onChange"],rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",validateTrigger:"onBlur"},{min:9,max:16,message:"\u5bc6\u7801\u957f\u5ea6\u57289~16\u4f4d\u4e4b\u95f4",validateTrigger:["onBlur","onChange"]}]},i.a.createElement(g.a,{disabled:!!P,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})),i.a.createElement(p.a.Item,{name:"remarks",label:"\u5907\u6ce8",rules:[{required:!0,message:"\u5907\u6ce8\u4e0d\u80fd\u4e3a\u7a7a"}]},i.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})),i.a.createElement(p.a.Item,{label:"\u90e8\u95e8",name:"departmentId",validateTrigger:["onBlur","onChange"],rules:[{required:!0,message:"\u8bf7\u4e3a\u8be5\u8d26\u6237\u8bbe\u7f6e\u90e8\u95e8",validateTrigger:"onBlur"}]},i.a.createElement(m.a,{placeholder:"\u8bf7\u9009\u62e9\u90e8\u95e8"},B.map((function(e){return i.a.createElement(E,{value:e._id,key:e._id},e.name)})))),i.a.createElement(p.a.Item,{colon:!1,wrapperCol:{offset:8}},i.a.createElement(v.a,{htmlType:"submit",type:"primary"},P?"\u4fdd\u5b58\u4fee\u6539":"\u6dfb\u52a0\u7528\u6237"),!P&&i.a.createElement(v.a,{className:"ml20",onClick:N,danger:!0},"\u6e05\u7a7a"),i.a.createElement(v.a,{className:"ml20",onClick:F,type:"ghost"},"\u53d6\u6d88")))))}))}}]);