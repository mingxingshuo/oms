(this.webpackJsonpoms=this.webpackJsonpoms||[]).push([[17],{703:function(e,a,t){"use strict";t.r(a);var r=t(49),n=t.n(r),l=t(170),c=t(71),s=t(89),i=t(0),o=t.n(i),m=t(47),u=t(547),p=t(436),d=t(69),f=t(437),b=t(439),g=t(37),E=t(171),h=u.a.Option;a.default=Object(m.g)((function(e){var a=e.location,t=e.history,r=Object(i.useState)(""),m=Object(s.a)(r,2),v=m[0],O=m[1],j=Object(i.useState)(""),k=Object(s.a)(j,2),x=k[0],w=k[1],y=o.a.createRef(),C=function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.a.confirm({title:x?"\u786e\u5b9a\u4fee\u6539\u8d26\u6237\u4fe1\u606f\u5417\uff1f":"\u786e\u5b9a\u521b\u5efa\u4e00\u4e2a\u65b0\u8d26\u6237\u5417\uff1f",onOk:function(){var e=Object(c.a)(n.a.mark((function e(){var t,r,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=6;break}return e.next=3,Object(E.f)(Object(l.a)({},a,{id:x}));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Object(E.a)(a);case 8:e.t0=e.sent;case 9:t=e.t0,r=t.code,c=t.msg,1===r?(q(),d.a.success(c)):d.a.error(c);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),I=function(){y.current.resetFields(),w(""),O("")},q=function(){I(),t.goBack()};return Object(i.useEffect)((function(){var e=localStorage.getItem("role");if(O(e),a.query){var r=a.query.info;w(r._id),y.current.setFieldsValue(Object(l.a)({},r))}else a.pathname.indexOf("/edit")>-1&&t.push("./add")}),[]),o.a.createElement("div",null,o.a.createElement("div",{className:"container"},o.a.createElement(f.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:8}}},{ref:y,onFinish:C}),o.a.createElement(f.a.Item,{name:"username",label:"\u7528\u6237\u540d",validateTrigger:["onBlur","onChange"],rules:[{validator:function(e,a){return a?/[\u4E00-\u9FA5]/g.test(a)?Promise.reject("\u4e0d\u80fd\u8f93\u5165\u6c49\u5b57!"):Promise.resolve():Promise.reject("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a")},validateTrigger:"onBlur"}],required:!0},o.a.createElement(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})),o.a.createElement(f.a.Item,{name:"nickName",label:"\u6635\u79f0"},o.a.createElement(b.a,{placeholder:"\u8bf7\u8f93\u5165\u6635\u79f0"})),o.a.createElement(f.a.Item,{name:"password",label:"\u5bc6\u7801",validateTrigger:["onBlur","onChange"],rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",validateTrigger:"onBlur"},{min:9,max:16,message:"\u5bc6\u7801\u957f\u5ea6\u57289~16\u4f4d\u4e4b\u95f4",validateTrigger:["onBlur","onChange"]}]},o.a.createElement(b.a,{disabled:!!x,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})),o.a.createElement(f.a.Item,{name:"remarks",label:"\u5907\u6ce8",rules:[{required:!0,message:"\u5907\u6ce8\u4e0d\u80fd\u4e3a\u7a7a"}]},o.a.createElement(b.a,{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})),o.a.createElement(f.a.Item,{label:"\u7ba1\u7406\u5458\u6743\u9650",name:"role",required:!0},o.a.createElement(u.a,{placeholder:"\u8bf7\u9009\u62e9\u7ba1\u7406\u5458\u6743\u9650",disabled:!!x},"\u540e\u53f0\u7ba1\u7406\u5458\u8d26\u53f7"===v&&o.a.createElement(h,{value:0},"\u516c\u53f8/\u56e2\u961f"),"\u4e3b\u8d26\u53f7"===v&&o.a.createElement(o.a.Fragment,null,o.a.createElement(h,{value:2},"\u9500\u552e")))),o.a.createElement(f.a.Item,{colon:!1,wrapperCol:{offset:8}},o.a.createElement(g.a,{htmlType:"submit",type:"primary"},x?"\u4fdd\u5b58\u4fee\u6539":"\u6dfb\u52a0\u7528\u6237"),!x&&o.a.createElement(g.a,{className:"ml20",onClick:I,danger:!0},"\u6e05\u7a7a"),o.a.createElement(g.a,{className:"ml20",onClick:q,type:"ghost"},"\u53d6\u6d88")))))}))}}]);