(this.webpackJsonpoms=this.webpackJsonpoms||[]).push([[9],{466:function(e,t,n){"use strict";var r=n(151),a=n(470),c=n(0),i=n.n(c),o=n(641);t.a=function(e){var t=e.total,n=e.changePage,l=Object(a.a)(e,["total","changePage"]),d=Object(c.useState)(1),u=Object(r.a)(d,2),s=u[0],f=u[1],h={current:s,total:t,showTotal:function(e){return"\u5171 ".concat(e," \u6761")},showQuickJumper:!0,position:["bottomCenter"],onChange:function(e){f(e),n(e)}};return i.a.createElement(o.a,Object.assign({pagination:h},l))}},469:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return l}));var r=n(74),a=function(e){return r.a.get("/order/find",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},c=function(e){return r.a.post("/order/create",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},i=function(e){return r.a.get("/order/confirm",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},o=function(e){return r.a.get("/order/route",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},l=function(e){return r.a.get("/order/findOne",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))}},624:function(e,t,n){},640:function(e,t,n){"use strict";n.r(t);var r=n(38),a=n.n(r),c=n(61),i=n(21),o=n(22),l=n(24),d=n(23),u=n(0),s=n.n(u),f=n(416),h=n(212),m=n(415),g=n(45),p=n(644),y=n(651),v=n(650),k=n(468),w=n.n(k),x=(n(623),n(466)),b=n(469),O=(n(624),f.a.Search);w.a.locale("zh-cn");var j=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={orderList:[],total:0,visible:!1,deliveryInfo:{accept_address:"",accept_time:"",remark:"",opcode:""}},e.queryDeliveryStatus=function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,i,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(b.e)({tracking_number:n,tracking_type:2});case 2:r=t.sent,c=r.code,i=r.msg,o=r.data,1===c?(h.a.success(i),e.setState({deliveryInfo:o}),e.showDrawer()):h.a.error(i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.findByCondition=function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,i,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(b.c)({orderid:n});case 2:r=t.sent,c=r.code,i=r.msg,o=r.data,1===c?(h.a.success(i),e.setState({orderList:o,total:1})):h.a.error(i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getOrderList=Object(c.a)(a.a.mark((function t(){var n,r,c,i,o,l=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:1,t.next=3,Object(b.d)({page:n});case 3:r=t.sent,c=r.code,i=r.data,o=r.count,1===c&&e.setState({orderList:i,total:o});case 8:case"end":return t.stop()}}),t)}))),e.changePage=function(t){e.getOrderList(t)},e.changeOrderState=function(e){m.a.confirm({title:"\u60a8\u786e\u8ba4\u8981\u4fee\u6539\u8ba2\u5355\u72b6\u6001\u5417\uff1f",style:{top:"40%"},onOk:function(){var t=Object(c.a)(a.a.mark((function t(){var n,r,c,i,o,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.orderid,r=e.mailno,c=e.dealtype,i=2===c?1:2,t.next=4,Object(b.a)({orderid:n,mailno:r,dealtype:i});case 4:o=t.sent,l=o.code,d=o.msg,1===l?h.a.success("\u72b6\u6001\u4fee\u6539\u6210\u529f"):h.a.error(d);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onCancel:function(){h.a.warning("\u5df2\u53d6\u6d88\u64cd\u4f5c")}})},e.showDrawer=function(){e.setState({visible:!0})},e.onClose=function(){e.setState({visible:!1})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getOrderList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.orderList,r=t.total,a=t.deliveryInfo,c=[{key:"mailno",dataIndex:"mailno",title:"\u987a\u4e30\u8fd0\u5355\u53f7",width:150,align:"center",fixed:"left",render:function(e){return e||"\u6d4b\u8bd5\u6570\u636e\uff0c\u6ca1\u6709\u751f\u6210\u987a\u4e30\u8ba2\u5355"}},{key:"dealtype",dataIndex:"dealtype",title:"\u8ba2\u5355\u72b6\u6001",width:80,align:"center",fixed:"left",render:function(e){return s.a.createElement(g.a,{style:{cursor:"auto"},type:"link",danger:2===e},0===e?"\u9ed8\u8ba4":1===e?"\u5df2\u786e\u8ba4":"\u5df2\u53d6\u6d88")}},{title:"\u7269\u54c1\u4fe1\u606f",children:[{key:"orderid",dataIndex:"orderid",title:"\u8ba2\u5355\u53f7",align:"center",width:120},{key:"name",dataIndex:"Cargo",title:"\u8d27\u54c1\u540d\u79f0",align:"center",width:100,render:function(e){return e&&e.length?s.a.createElement("ul",{className:"cargo-list"},e.map((function(e,t){return s.a.createElement("li",{key:e.name+t},e.name)}))):{children:"\u6682\u65e0\u8d27\u54c1\u4fe1\u606f",props:{colSpan:2}}}},{key:"count",dataIndex:"Cargo",title:"\u8d27\u54c1\u6570\u91cf",align:"center",width:100,render:function(e){return e&&e.length?s.a.createElement("ul",{className:"cargo-list"},e.map((function(e,t){return s.a.createElement("li",{key:e.count+""+t},e.count)}))):{props:{colSpan:0}}}}]},{title:"\u5bc4\u4ef6\u4eba\u4fe1\u606f",children:[{key:"j_company",dataIndex:"j_company",title:"\u5bc4\u4ef6\u4eba\u516c\u53f8\u540d\u79f0",width:100,align:"center"},{key:"j_contact",dataIndex:"j_contact",title:"\u5bc4\u4ef6\u4eba\u59d3\u540d",width:80,align:"center"},{key:"j_tel",dataIndex:"j_tel",title:"\u5bc4\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd",width:110,align:"center"},{key:"j_address",dataIndex:"j_address",title:"\u5bc4\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740",align:"center",width:150}]},{title:"\u6536\u4ef6\u4eba\u4fe1\u606f",children:[{key:"d_company",dataIndex:"d_company",title:"\u6536\u4ef6\u4eba\u516c\u53f8\u540d\u79f0",width:100,align:"center"},{key:"d_contact",dataIndex:"d_contact",title:"\u6536\u4ef6\u4eba\u59d3\u540d",width:80,align:"center"},{key:"d_tel",dataIndex:"d_tel",title:"\u6536\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd",width:110,align:"center"},{key:"d_address",dataIndex:"d_address",title:"\u6536\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740",align:"center",width:150}]},{title:"\u589e\u503c\u670d\u52a1",children:[{key:"AddedService",dataIndex:"AddedService",title:"\u662f\u5426\u4ee3\u6536\u8d27\u6b3e",align:"center",width:80,render:function(e){return e.filter((function(e){return"COD"===e.name})).length?s.a.createElement(y.a,{twoToneColor:"#52c41a"}):s.a.createElement(v.a,null)}},{key:"value",dataIndex:"AddedService",title:"\u4ee3\u6536\u8d27\u6b3e\u91d1\u989d",align:"center",width:80,render:function(e){return e.filter((function(e){return"COD"===e.name})).length?e.filter((function(e){return"COD"===e.name}))[0].value:"\u2014\u2014"}},{key:"value1",dataIndex:"AddedService",title:"\u4ee3\u6536\u8d27\u6b3e\u5361\u53f7",align:"center",width:150,render:function(e){return e.filter((function(e){return"COD"===e.name})).length?e.filter((function(e){return"COD"===e.name}))[0].value1:"\u2014\u2014"}}]},{title:"\u8ba2\u5355\u65f6\u95f4",children:[{key:"createAt",dataIndex:"createAt",title:"\u4e0b\u5355\u65f6\u95f4",align:"center",width:120,render:function(e){return w()(e).format("llll")}},{key:"updateAt",dataIndex:"updateAt",title:"\u6700\u8fd1\u4e00\u6b21\u4fee\u6539",align:"center",width:120,render:function(e){return w()(e).format("llll")}},{key:"sendstarttime",dataIndex:"sendstarttime",title:"\u4e0a\u95e8\u53d6\u4ef6\u65f6\u95f4",align:"center",width:120,render:function(e){return w()(e).format("llll")}}]},{key:"action",dataIndex:"action",title:"\u64cd\u4f5c",width:120,align:"center",fixed:"right",render:function(t,n){return s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{type:"link",onClick:function(){return e.queryDeliveryStatus(n.orderid)}},"\u67e5\u8be2\u7269\u6d41\u72b6\u6001"),s.a.createElement(g.a,{type:"link",onClick:function(){return e.changeOrderState(n)}},"\u4fee\u6539\u8ba2\u5355\u72b6\u6001"))}}];return s.a.createElement("div",{className:"order-list"},s.a.createElement("div",{className:"container"},s.a.createElement(O,{style:{width:360,marginBottom:20},placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7",enterButton:"\u67e5\u8be2",onSearch:this.findByCondition}),s.a.createElement(x.a,{rowKey:function(e){return e._id},dataSource:n,columns:c,total:r,size:"small",bordered:!0,scroll:{x:"100%"},changePage:this.changePage})),s.a.createElement(p.a,{placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible},s.a.createElement("p",null,"\u65f6\u95f4\uff1a",a.accept_time),s.a.createElement("p",null,"\u5730\u70b9\uff1a",a.accept_address),s.a.createElement("p",null,"\u7269\u6d41\u72b6\u6001\uff1a",a.remark)))}}]),n}(u.Component);t.default=j}}]);