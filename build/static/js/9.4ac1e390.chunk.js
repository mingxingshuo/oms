(this.webpackJsonpoms=this.webpackJsonpoms||[]).push([[9],{324:function(e,t,n){"use strict";var r=n(98),a=n.n(r),s=n(123),o=n(125),c=n.n(o),u=n(304),i=localStorage.getItem("userInfo"),l=i?JSON.parse(i)._id:"";function m(e,t,n){return new Promise((function(r,a){c()({method:e,url:t,params:n}).then((function(e){return r(e.data)})).catch((function(e){return console.log(e)}))}))}function f(e,t,n){return new Promise((function(r,a){c()({method:e,url:t,data:n}).then((function(e){r(e.data)})).catch((function(e){return console.log(e)}))}))}c.a.defaults.timeout=1e4,c.a.defaults.headers={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json;charset=utf-8"},c.a.defaults.withcredentials=!0,c.a.interceptors.request.use((function(e){if(l&&Date.now()-+new Date(JSON.parse(i).loginAt)<864e5||"/user/login"===e.url){var t=Date.now();return"get"===e.method||"delete"===e.method?e.url.indexOf("?")>=0?e.url+="&account_id="+l+"&_t="+t:e.url+="?account_id="+l+"&_t="+t:"post"!==e.method&&"put"!==e.method||(e.data.account_id=l,e.data._t=t),e}u.a.warning("\u767b\u5f55\u4fe1\u606f\u5931\u6548\uff0c\u5373\u5c06\u8df3\u8f6c\u5230\u767b\u5f55\u9875"),setTimeout((function(){localStorage.removeItem("userInfo"),localStorage.removeItem("menuList"),window.location.href="/admin/login"}),1500)}),(function(e){return Promise.reject(e)})),c.a.interceptors.response.use((function(e){return e}),(function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="\u8bf7\u6c42\u53c2\u6570\u6709\u8bef";break;case 401:e.message="\u767b\u5f55\u4fe1\u606f\u5931\u6548";break;case 403:e.message="\u62d2\u7edd\u8bbf\u95ee";break;case 404:e.message="\u6ca1\u6709\u67e5\u8be2\u5230\u6709\u5173\u6570\u636e";break;case 405:e.message="\u8bf7\u6c42\u65b9\u6cd5\u672a\u5141\u8bb8";break;case 408:e.message="\u8bf7\u6c42\u8d85\u65f6";break;case 500:e.message="\u670d\u52a1\u5668\u7aef\u51fa\u9519";break;case 501:e.message="\u7f51\u7edc\u672a\u5b9e\u73b0";break;case 502:e.message="\u7f51\u7edc\u9519\u8bef";break;case 503:e.message="\u670d\u52a1\u4e0d\u53ef\u7528";break;case 504:e.message="\u7f51\u7edc\u8d85\u65f6";break;case 505:e.message="http\u7248\u672c\u4e0d\u652f\u6301\u8be5\u8bf7\u6c42";break;default:e.message="\u8fde\u63a5\u9519\u8bef".concat(e.response.status)}else e.message="\u8fde\u63a5\u5230\u670d\u52a1\u5668\u5931\u8d25";return u.a.error(e.message),Promise.reject(e.response)}));var g=function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("post",t,n);case 2:return r=e.sent,e.abrupt("return",Promise.resolve(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.a={get:function(e,t){var n=m("get",e,t);return Promise.resolve(n)},post:g,put:function(e,t){var n=f("put",e,t);return Promise.resolve(n)},delete:function(e,t){var n=m("delete",e,t);return Promise.resolve(n)}}},336:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(324),a=function(e){return r.a.post("/user/login",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},s=function(e){return r.a.get("/user",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},o=function(e){return r.a.post("/user",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},c=function(e){return r.a.put("/user",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))},u=function(e){return r.a.delete("/user",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return console.log(e)}))}},421:function(e,t,n){},422:function(e,t,n){var r=n(423);e.exports=function(e){var t=r.createHash("md5");return t.update(e,"utf8"),e=t.digest("hex")}},426:function(e,t){},428:function(e,t){},461:function(e,t){},462:function(e,t){},580:function(e,t,n){e.exports=n.p+"static/media/login_side.e12df5ba.jpg"},609:function(e,t,n){"use strict";n.r(t);var r=n(98),a=n.n(r),s=n(123),o=n(14),c=n(15),u=n(17),i=n(16),l=n(0),m=n.n(l),f=(n(421),n(61)),g=n(21),p=n(614),d=n(615),h=n(67),v=n(304),w=n(618),E=n(620),b=n(619),k=n(422),y=n.n(k),N=n(336),P=function(e){Object(u.a)(r,e);var t=Object(i.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return m.a.createElement("div",{className:"login-bg"},m.a.createElement("div",{className:"bg-mask"}),m.a.createElement("div",{className:"content-wrapper"},m.a.createElement(f.a,null,m.a.createElement(g.a,{span:"16"},m.a.createElement("div",{className:"login-form-wrapper"},m.a.createElement("div",{className:"login-form"},m.a.createElement("div",{className:"login-title"},m.a.createElement(w.a,null),m.a.createElement("span",{className:"title-text"},"\u7535\u5546 OMS \u7cfb\u7edf")),m.a.createElement(p.a,{style:{width:"100%"},name:"login",onFinish:this.login,scrollToFirstError:!0},m.a.createElement(p.a.Item,{name:"username",validateTrigger:"onBlur",rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{whitespace:!0,message:"\u8bf7\u786e\u4fdd\u8f93\u5165\u7684\u5185\u5bb9\u4e2d\u6ca1\u6709\u7a7a\u683c"}]},m.a.createElement(d.a,{className:"login-input",size:"large",prefix:m.a.createElement(E.a,null),placeholder:"\u7528\u6237\u540d",onPressEnter:this.login,allowClear:!0})),m.a.createElement(p.a.Item,{name:"password",validateTrigger:["onBlur","onChange"],rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",validateTrigger:"onBlur"},{min:9,max:16,message:"\u5bc6\u7801\u957f\u5ea6\u57289~16\u4f4d\u4e4b\u95f4",validateTrigger:["onBlur","onChange"]}]},m.a.createElement(d.a.Password,{className:"login-input",size:"large",prefix:m.a.createElement(b.a,null),placeholder:"\u5bc6\u7801",onPressEnter:this.login,allowClear:!0})),m.a.createElement(p.a.Item,null,m.a.createElement(h.a,{className:"login-btn cursor",type:"primary",htmlType:"submit"},"\u767b\u5f55"))),m.a.createElement("p",{className:"copy-right"},"Copyright\xa92020 \u6700\u7ec8\u89e3\u91ca\u6743\u5f52\u672c\u516c\u53f8\u6240\u6709")))),m.a.createElement(g.a,{span:"8"},m.a.createElement("img",{className:"login-side",src:n(580),alt:""})))))}},{key:"login",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,o,c,u,i,l,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"QE4CwVWGy1lBBIW5uoYFsZEwfyI7ScuU",n=t.username.trim(),r=y()(y()(t.password.trim()+"QE4CwVWGy1lBBIW5uoYFsZEwfyI7ScuU")),e.next=5,Object(N.d)({username:n,password:r});case 5:(s=e.sent)&&(o=s.code,c=s.msg,u=s.data,i=s.routers,-1===o?v.a.error(c):(l=JSON.stringify(u),m=JSON.stringify(i),localStorage.setItem("userInfo",l),localStorage.setItem("menuList",m),window.location.href="/admin",v.a.success(c)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l.Component);t.default=P}}]);