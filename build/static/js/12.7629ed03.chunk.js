(this.webpackJsonpoms=this.webpackJsonpoms||[]).push([[12],{451:function(e,t,n){"use strict";var a=n(167),r=n(88),c=n(458),i=n(0),o=n.n(i),s=n(699);t.a=function(e){var t=e.total,n=e.changePage,u=e.pagination,l=void 0===u?{}:u,d=e.keyWord,m=Object(c.a)(e,["total","changePage","pagination","keyWord"]),f=Object(i.useState)(1),h=Object(r.a)(f,2),g=h[0],p=h[1],w=sessionStorage.getItem(d+"PageNum"),x={current:w?+w:g,total:t,showTotal:function(e){return"\u5171 ".concat(e," \u6761")},showQuickJumper:!0,position:["bottomCenter"],onChange:function(e){sessionStorage.setItem(d+"PageNum",e),p(e),n(e)}};return o.a.createElement(s.a,Object.assign({pagination:!!l&&Object(a.a)({},x,{},l)},m))}},505:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n(62),r=function(e){return a.a.get("/customer",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},c=function(e){return a.a.post("/customer",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},i=function(e){return a.a.put("/customer",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},o=function(e){return a.a.delete("/customer",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))}},688:function(e,t,n){},697:function(e,t,n){"use strict";n.r(t);var a=n(49),r=n.n(a),c=n(70),i=n(167),o=n(88),s=n(0),u=n.n(s),l=n(32),d=n(47),m=n(436),f=n(38),h=n(221),g=n(434),p=n(478),w=n.n(p),x=(n(501),n(451)),y=n(505),k=(n(688),m.a.Search);w.a.locale("zh-cn");t.default=Object(d.g)((function(e){var t=e.location,n=(e.history,"\u4e3b\u8d26\u53f7"===localStorage.getItem("role")),a=Object(s.useState)([]),d=Object(o.a)(a,2),m=d[0],p=d[1],b=Object(s.useState)(0),v=Object(o.a)(b,2),I=v[0],O=v[1],j=Object(s.useState)(!1),E=Object(o.a)(j,2),P=E[0],N=E[1],S=[{key:"username",dataIndex:"username",title:"\u6240\u5c5e\u9500\u552e\u8d26\u53f7",width:80,align:"center"},{key:"userWxname",dataIndex:"userWxname",title:"\u6240\u5c5e\u9500\u552e\u5fae\u4fe1\u53f7",width:100,align:"center"},{key:"d_contact",dataIndex:"d_contact",title:"\u5ba2\u6237\u59d3\u540d",width:100,align:"center"},{key:"wxName",dataIndex:"wxName",title:"\u5ba2\u6237\u5fae\u4fe1\u6635\u79f0",width:100,align:"center"},{key:"sex",dataIndex:"sex",title:"\u6027\u522b",width:80,align:"center"},{key:"remark",dataIndex:"remark",title:"\u5907\u6ce8",width:110,align:"center"},{key:"createAt",dataIndex:"createAt",title:"\u52a0\u7c89\u65f6\u95f4",align:"center",width:120,render:function(e){return w()(e).format("llll")}},{key:"orderAt",dataIndex:"orderAt",title:"\u6700\u8fd1\u4e00\u6b21\u4e0b\u5355",align:"center",width:120,render:function(e){return w()(e).format("llll")}}],_=[{key:"d_contact",dataIndex:"d_contact",title:"\u59d3\u540d",width:100,fixed:"left",align:"center"},{title:"\u5ba2\u6237\u57fa\u672c\u4fe1\u606f",children:[{key:"wxName",dataIndex:"wxName",title:"\u5fae\u4fe1\u6635\u79f0",width:100,align:"center"},{key:"wxId",dataIndex:"wxId",title:"\u5fae\u4fe1id",width:100,align:"center"},{key:"sex",dataIndex:"sex",title:"\u6027\u522b",width:80,align:"center"},{key:"d_tel",dataIndex:"d_tel",title:"\u8054\u7cfb\u7535\u8bdd",width:110,align:"center"},{key:"d_address",dataIndex:"d_address",title:"\u8be6\u7ec6\u5730\u5740",align:"center",width:150}]},{title:"\u5176\u4ed6\u4fe1\u606f",children:[{key:"username",dataIndex:"username",title:"\u6240\u5c5e\u5fae\u4fe1",width:100,align:"center"},{key:"remark",dataIndex:"remark",title:"\u5907\u6ce8",width:110,align:"center"}]},{key:"infoAction",title:"\u57fa\u672c\u64cd\u4f5c",width:120,align:"center",fixed:"right",render:function(e,t){return u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{type:"link"},u.a.createElement(l.b,{to:{pathname:"/admin/sales/customer/edit",query:Object(i.a)({},t)}},"\u7f16\u8f91")),u.a.createElement(f.a,{type:"link",shape:"round",size:"small",onClick:function(){return z(t._id)},danger:!0},"\u5220\u9664"))}},{key:"orderAction",title:"\u8ba2\u5355\u64cd\u4f5c",width:120,align:"center",fixed:"right",render:function(e,t){return u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{className:"mb5",type:"primary",shape:"round",size:"small"},u.a.createElement(l.b,{to:{pathname:"/admin/sales/customer/order/create",query:Object(i.a)({},t)}},"\u7acb\u5373\u4e0b\u5355")),u.a.createElement(f.a,{type:"primary",ghost:!0,shape:"round",size:"small"},u.a.createElement(l.b,{to:{pathname:"/admin/sales/customer/order/list",query:{customerId:t._id}}},"\u67e5\u770b\u8ba2\u5355")))}}],A={width:300},C=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,i,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sessionStorage.getItem("customerPageNum")||1,e.next=3,Object(y.d)({page:n,name:t});case 3:a=e.sent,c=a.code,i=a.msg,o=a.data,s=a.count,1===c?(p(o),O(s),t&&h.a.success(i)):t&&C();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u5ba2\u6237\u5417\uff1f",onOk:function(){var e=Object(c.a)(r.a.mark((function e(){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.b)({id:t});case 2:n=e.sent,a=n.code,c=n.msg,1===a?(h.a.success("\u5220\u9664\u6210\u529f"),C()):h.a.error(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){h.a.warning("\u5df2\u53d6\u6d88\u64cd\u4f5c")}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){t.pathname.indexOf("/wechat/customer")>-1&&N(!0),C()}),[]),u.a.createElement("div",{className:"customer-list"},u.a.createElement("div",{className:"container"},u.a.createElement(x.a,{rowKey:function(e){return e._id},dataSource:m,columns:n?S:_,total:I,size:"small",bordered:!0,scroll:{y:400,scrollToFirstRowOnChange:!0},changePage:C,title:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(k,{style:A,placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u59d3\u540d/\u6635\u79f0",enterButton:"\u67e5\u8be2",onSearch:C,allowClear:!0}),!P&&u.a.createElement(f.a,{className:"fr",type:"link"},u.a.createElement(l.b,{to:"./add"},"\u6dfb\u52a0\u5ba2\u6237")))}})))}))}}]);