(this.webpackJsonpoms=this.webpackJsonpoms||[]).push([[15],{503:function(e,a,t){"use strict";t.d(a,"e",(function(){return r})),t.d(a,"c",(function(){return c})),t.d(a,"g",(function(){return l})),t.d(a,"b",(function(){return o})),t.d(a,"f",(function(){return m})),t.d(a,"d",(function(){return s})),t.d(a,"a",(function(){return u}));var n=t(62),r=function(e){return n.a.get("/order/find",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},c=function(e){return n.a.post("/order/create",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},l=function(e){return n.a.get("/order/submit",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},o=function(e){return n.a.get("/order/confirm",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},m=function(e){return n.a.get("/order/route",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},s=function(e){return n.a.get("/order/findOne",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))},u=function(e){return n.a.get("/order/review",e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e)}))}},544:function(e){e.exports=JSON.parse('{"COD":{"name":"COD","name_zh":"\u4ee3\u6536\u8d27\u6b3e\u670d\u52a1","attribute":[{"field":"value","title":"\u4ee3\u6536\u8d27\u6b3e\u91d1\u989d"},{"field":"value1","title":"\u4ee3\u6536\u8d27\u6b3e\u5361\u53f7"}]}}')},686:function(e,a,t){},714:function(e,a,t){"use strict";t.r(a);var n=t(141),r=t(49),c=t.n(r),l=t(170),o=t(71),m=t(89),s=t(0),u=t.n(s),i=t(47),d=t(436),f=t(68),E=t(437),p=t(88),b=t(42),h=t(548),v=t(707),g=t(438),O=t(549),j=t(700),y=t(38),w=t(717),I=t(716),k=t(461),C=t.n(k),N=t(503),x=t(706),_=function(e){var a=e.cargo,t=e.clearList,n=e.deleteOne,r=Object(s.useState)([]),c=Object(m.a)(r,2),l=c[0],o=c[1],i=[{key:"name",dataIndex:"name",title:"\u8d27\u7269\u540d\u79f0",align:"center"},{key:"count",dataIndex:"count",title:"\u8d27\u7269\u6570\u91cf",align:"center"},{key:"action",title:"\u64cd\u4f5c",align:"center",width:80,render:function(e,a,t){return u.a.createElement(y.a,{type:"link",danger:!0,onClick:function(){return n(t)}},"\u5220\u9664")}}];return Object(s.useEffect)((function(){o(a)})),u.a.createElement(x.a,{locale:{emptyText:"\u6682\u65e0\u8d27\u54c1\u4fe1\u606f\uff0c\u8bf7\u5148\u6dfb\u52a0"},className:"mb20",size:"small",bordered:!0,rowKey:function(e,a){return a},columns:i,dataSource:l,pagination:!1,onRow:function(e){return{onClick:function(e){},onMouseEnter:function(e){},onMouseLeave:function(e){}}},summary:function(){return l.length?u.a.createElement(x.a.Summary.Row,null,u.a.createElement(x.a.Summary.Cell,{colSpan:3,className:"tc"},u.a.createElement(y.a,{type:"link",danger:!0,onClick:t},"\u6e05\u7a7a\u5217\u8868"))):null}})},D=t(544),P=function(e){e.name;var a=Object(s.useState)({name:"COD",name_zh:"\u4ee3\u6536\u8d27\u6b3e\u670d\u52a1",attribute:[{field:"value",title:"\u4ee3\u6536\u8d27\u6b3e\u91d1\u989d"},{field:"value1",title:"\u4ee3\u6536\u8d27\u6b3e\u5361\u53f7"}]}),t=Object(m.a)(a,2),n=t[0],r=(t[1],{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16},offset:0}});return Object(s.useEffect)((function(){}),[]),n.name?u.a.createElement(p.a,{gutter:24,className:"mb_20"},u.a.createElement(b.a,{span:24},u.a.createElement("h3",{className:"added-service-title"},n.name_zh)),n.attribute.map((function(e){return u.a.createElement(b.a,{span:12,key:e.field},u.a.createElement(E.a.Item,Object.assign({},r,{name:n.name+e.field,label:e.title,rules:[{required:!0,message:e.title+"\u4e0d\u80fd\u4e3a\u7a7a"}]}),u.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165"+e.title})))}))):u.a.createElement("span",null,"\u65e0\u6b64\u589e\u503c\u670d\u52a1")};t(686);function S(e,a){for(var t=[],n=0;n<e.length;n++){var r=e[n].code,c={name:r};for(var l in a){var o=l.split(r);o[0]||(c[o[1]]=a[l])}t.push(c)}return t}function Y(e,a){for(var t=[],n=e;n<a;n++)t.push(n);return t}function q(e){return e&&e<C()().startOf("day")}function M(){return{disabledHours:function(){return Y(0,24).splice(0,8).concat(Y(0,24).splice(-2,2))}}}a.default=Object(i.g)((function(e){var a=u.a.createRef(),t=e.location,r=e.history,i=Object(s.useState)(""),k=Object(m.a)(i,2),x=k[0],Y=k[1],T=Object(s.useState)(""),z=Object(m.a)(T,2),H=z[0],R=z[1],F=Object(s.useState)([]),X=Object(m.a)(F,2),A=X[0],V=X[1],J=Object(s.useState)([]),L=Object(m.a)(J,2),B=L[0],G=L[1],K=function(){V([]),G([])},Q=function(){K(),r.goBack()};return Object(s.useEffect)((function(){var e=t.query;e?(a.current.resetFields(),a.current.setFieldsValue(Object(l.a)({},e)),R(function(){var e=Math.ceil(999*Math.random());return e=(Array(4).join(0)+e).slice(-4),"GQ"+C()(Date.now()).format("YYYYMMDD")+Date.now()+e}()),Y(e._id)):(f.a.warning("\u6ca1\u6709\u83b7\u53d6\u5230\u5ba2\u6237\u7684\u4fe1\u606f\uff0c\u8bf7\u5148\u9009\u62e9\u5ba2\u6237\u540e\u518d\u8fdb\u884c\u64cd\u4f5c"),r.goBack())}),[]),u.a.createElement("div",{className:"add-order"},u.a.createElement("div",{className:"container"},u.a.createElement(E.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:9}},wrapperCol:{xs:{span:24},sm:{span:15},offset:0}},{ref:a,onFinish:function(e){var a={orderid:H,customerId:x,Cargo:A,AddedService:S(B,e),d_company:"XXX",j_company:"XXX",sendstarttime:C()(e.sendstarttime).format("YYYY-MM-DD HH:mm:ss")};d.a.confirm({title:"\u786e\u5b9a\u521b\u5efa\u4e00\u4e2a\u65b0\u8ba2\u5355\u5417\uff1f",onOk:function(){var t=Object(o.a)(c.a.mark((function t(){var n,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(N.c)(Object(l.a)({},e,{},a));case 2:n=t.sent,r=n.code,o=n.msg,1===r?(f.a.success(o),Q()):f.a.error(o);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},scrollToFirstError:!0,initialValues:{isAdded:!1}}),u.a.createElement(p.a,{gutter:24},u.a.createElement(b.a,{span:24},u.a.createElement(h.a,{bordered:!0,layout:"vertical",column:2},u.a.createElement(h.a.Item,{label:u.a.createElement("h2",null,"\u57fa\u672c\u4fe1\u606f"),span:1},u.a.createElement(E.a.Item,{label:"\u8ba2\u5355\u53f7",required:!0},H),u.a.createElement(E.a.Item,{label:"\u987a\u4e30\u6708\u7ed3\u5361\u53f7",required:!0},"\u6d4b\u8bd5\u671f\u95f4\u6682\u65f6\u4e0d\u9700\u8981")),u.a.createElement(h.a.Item,{label:u.a.createElement("h2",null,"\u5176\u4ed6\u4fe1\u606f")},u.a.createElement(E.a.Item,{name:"sendstarttime",label:"\u4e0a\u95e8\u53d6\u4ef6\u65f6\u95f4",rules:[{required:!0,message:"\u4e0a\u95e8\u53d6\u4ef6\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a"}]},u.a.createElement(v.a,{placeholder:"\u8bf7\u8f93\u5165\u4e0a\u95e8\u53d6\u4ef6\u65f6\u95f4",disabledDate:q,disabledTime:M,format:"YYYY-MM-DD HH:mm:ss",showTime:{defaultValue:C()("09:00:00","HH:mm:ss")},showToday:!1}))),u.a.createElement(h.a.Item,{label:u.a.createElement("h2",null,"\u5bc4\u4ef6\u4eba\u4fe1\u606f")},u.a.createElement(E.a.Item,{name:"j_contact",label:"\u5bc4\u4ef6\u4eba\u59d3\u540d",rules:[{required:!0,message:"\u5bc4\u4ef6\u4eba\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"}]},u.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc4\u4ef6\u4eba\u59d3\u540d"})),u.a.createElement(E.a.Item,{name:"j_tel",label:"\u5bc4\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd",rules:[{required:!0,message:"\u5bc4\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd\u4e0d\u80fd\u4e3a\u7a7a"}]},u.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc4\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd"})),u.a.createElement(E.a.Item,{name:"j_address",label:"\u5bc4\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740",rules:[{required:!0,message:"\u5bc4\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a"}]},u.a.createElement(g.a.TextArea,{autoSize:{minRows:3,maxRows:5},placeholder:"\u8bf7\u8f93\u5165\u5bc4\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740"}))),u.a.createElement(h.a.Item,{label:u.a.createElement("h2",null,"\u6536\u4ef6\u4eba\u4fe1\u606f")},u.a.createElement(E.a.Item,{name:"d_contact",label:"\u6536\u4ef6\u4eba\u59d3\u540d",rules:[{required:!0,message:"\u6536\u4ef6\u4eba\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"}]},u.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6536\u4ef6\u4eba\u59d3\u540d"})),u.a.createElement(E.a.Item,{name:"d_tel",label:"\u6536\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd",rules:[{required:!0,message:"\u6536\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd\u4e0d\u80fd\u4e3a\u7a7a"}]},u.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6536\u4ef6\u4eba\u8054\u7cfb\u7535\u8bdd"})),u.a.createElement(E.a.Item,{name:"d_address",label:"\u6536\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740",rules:[{required:!0,message:"\u6536\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a"}]},u.a.createElement(g.a.TextArea,{autoSize:{minRows:3,maxRows:5},placeholder:"\u8bf7\u8f93\u5165\u6536\u4ef6\u4eba\u8be6\u7ec6\u5730\u5740"}))))),u.a.createElement(b.a,{span:24},u.a.createElement(h.a,{bordered:!0,layout:"vertical"},u.a.createElement(h.a.Item,{label:u.a.createElement("h2",null,"\u8d27\u54c1\u4fe1\u606f")},u.a.createElement(p.a,{gutter:24},u.a.createElement(b.a,{span:24,offset:1,className:"mb20"},u.a.createElement("p",{className:"cargo-tips"},u.a.createElement(w.a,{twoToneColor:"ff5566",className:"mr5 ml10"}),"\u5c0f\u63d0\u793a: \u8d27\u54c1\u4fe1\u606f\u4ee5\u4e0b\u65b9\u8868\u683c\u4e2d\u7684\u6570\u636e\u4e3a\u51c6\uff0c\u672a\u6dfb\u52a0\u5230\u8868\u683c\u4e2d\u7684\u6570\u636e\u65e0\u6548"))),u.a.createElement(p.a,{gutter:22,className:"mb_20"},u.a.createElement(b.a,{span:8},u.a.createElement(E.a.Item,{label:"\u8d27\u54c1\u540d\u79f0",name:"name"},u.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u54c1\u540d\u79f0"}))),u.a.createElement(b.a,{span:8},u.a.createElement(E.a.Item,{name:"count",label:"\u8d27\u54c1\u6570\u91cf"},u.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u8d27\u54c1\u6570\u91cf\uff0c\u9ed8\u8ba4\u4e3a1\u4ef6"}))),u.a.createElement(b.a,{span:4},u.a.createElement(I.a,{className:"plus-cargo cursor",onClick:function(){var e=a.current.getFieldsValue(),t=e.name,r=e.count;t?(!r&&(r=1),V([].concat(Object(n.a)(A),[{name:t,count:r}])),a.current.setFieldsValue({name:"",count:null})):f.a.error("\u8d27\u7269\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")}})),u.a.createElement(b.a,{span:24},u.a.createElement(p.a,{gutter:24},u.a.createElement(b.a,{span:16,offset:1},u.a.createElement(_,{cargo:A,clearList:function(){V([])},deleteOne:function(e){var a=Object(n.a)(A);a.splice(e,1),V(a)}})))))))),u.a.createElement(b.a,{span:24},u.a.createElement(h.a,{bordered:!0,layout:"vertical"},u.a.createElement(h.a.Item,{label:u.a.createElement("div",{className:"service-title"},u.a.createElement("h2",{className:"fl"},"\u589e\u503c\u670d\u52a1"),u.a.createElement(O.a.Group,{className:"fl ml20 check-box-group",options:["COD"],value:B.map((function(e){return e.code})),onChange:function(e){var a=e.map((function(e){return{name:D[e].name_zh,code:D[e].name}}));G(a)}},u.a.createElement(O.a,{value:"COD"},"\u4ee3\u6536\u8d27\u6b3e\u670d\u52a1")))},u.a.createElement(p.a,{gutter:24},u.a.createElement(b.a,{span:24},B.length?B.map((function(e){return u.a.createElement(j.a,{key:e.code},e.name)})):u.a.createElement("span",null,"\u6ca1\u6709\u9009\u62e9\u589e\u503c\u670d\u52a1"))),B.length?B.map((function(e){return u.a.createElement(P,{name:e.code,key:e.code+e.name})})):null)))),u.a.createElement(E.a.Item,{className:"btn-wrapper",colon:!1,wrapperCol:{offset:10}},u.a.createElement(y.a,{htmlType:"submit",type:"primary"},"\u521b\u5efa\u8ba2\u5355"),u.a.createElement(y.a,{className:"ml20",onClick:K,danger:!0},"\u6e05\u7a7a"),u.a.createElement(y.a,{className:"ml20",onClick:Q,type:"ghost"},"\u53d6\u6d88")))))}))}}]);